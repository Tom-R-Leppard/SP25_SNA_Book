{"title":"Network Visualisation - Basic","markdown":{"headingText":"Network Visualisation - Basic","containsRefs":false,"markdown":"```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\n```\n\n\nThere are several things that you can do to alter the aesthetic of your network visualisation. Creating a 'clean' visualisation is a process of toggling back and forth between various options until you generate a visualisation that is free from visual noise and clearly demonstrates the nature of your data. Remember, people don't usually spend too long looking at a visual. So, whatever you want to portray needs to be captured quickly and easily by a viewer.\n\nThis being said, there are aspects of the visualisation that you must remember that can help you generate a basic clear visual. These are the layout, colours, sizes, titles and labels. In this chapter you will cover each individually, but you must remember to combine these techniques generate your visualisation.\n\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| LEARNING ELEMENTS - Data Practices                                                                                                                                                                                                                                                                                                                                             |\n+================================================================================================================================================================================================================================================================================================================================================================================+\n| -   Employing Design Practices. Networks are inherently messier than most other data visualisations. Think about a line graph. There is a lot of empty space in the plot, two axes and a line or two to follow. Networks, however, have a lot going on with the nodes and edges. Here you will learn some best practices to reduce some of the visual 'noise' of your network. |\n|                                                                                                                                                                                                                                                                                                                                                                                |\n| -   Visual accessibikity. One word you must care about: accessibility. If your viewer (stakeholder, boss, students, client etc.) cannot understand your plot, then that is a problem!                                                                                                                                                                                          |\n|                                                                                                                                                                                                                                                                                                                                                                                |\n| -   Create plots that are easily understood (self-contained) without much need for an explanation and that deploy colour palettes eassily accessible.                                                                                                                                                                                                                          |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n```{r}\nlibrary(igraph)\nlibrary(ADAPTSNA)\n\ngrime_edge_list <- load_data(\"GRIME_2008_Edge.csv\", header = TRUE)\n\ngrime_08 <- graph_from_data_frame(d= grime_edge_list, directed = TRUE)\nplot(grime_08)\n\n\ngrime_08_clean <- delete.edges(grime_08, E(grime_08)[which_loop(grime_08)])\n\nplot(grime_08_clean)\n```\n\n## Layout\n\nThere are multiple preset layouts that igraph can deploy. Some layouts emphasise the nodes in your graph (i.e. making them clearer to see) while others emphasise the edges. Take a look through each of these layouts and see the types of stories you could tell about this network with each.\n\n-   Random\n\n```{r}\nplot(grime_08_clean, layout = layout.random)\n```\n\n-   Grid\n\n```{r}\nplot(grime_08_clean, layout = layout.grid)\n```\n\n-   Small world/Circle\n\n```{r}\nplot(grime_08_clean, layout = layout.circle)\n```\n\n-   Force-directed Layouts\n\nThese final layouts, called force-directed, determine the node's position based on its relationship to others in the network. It attracts a node towards those that they are connected to but ensures they do not overlap. Here, we cover three algorithms, Fruchterman-Reingold, Kamanda-Kawaii, and Davidson-Harl which all perform slightly differently, but achieve the same thing.\n\n```{r}\nplot(grime_08_clean, layout = layout_with_dh(grime_08_clean))\n\nplot(grime_08_clean, layout = layout_with_fr(grime_08_clean))\n\nplot(grime_08_clean, layout = layout_with_kk(grime_08_clean))\n```\n\n## Changing the Colours\n\nColours are an important aspect of network visualisation since they can be used to distinguish one type of node from another, or they can be used to accent certain nodes. However, remember that not everyone can see colours clearly. Select colours that have a high contrast from one another. In other words, colours that are distinct. Also, avoid colour pairs that, commonly, colour blind people cannot differentiate. For example, many can't differentiate between red and green. So, it is advisable to avoid that pairing.\n\nWe can change the node colours with the verterx.color() option. You can also toggle with the transparency of the colour using the adjustcolor option and changing the colour's alpha. Adjusting the alpha can also help with hairball visualisations since the transparency can help visualise overlapping nodes.\n\n```{r}\nplot(grime_08_clean, vertex.color = \"firebrick1\")\n```\n\n```{r}\nplot(grime_08_clean, vertex.color = adjustcolor(\"firebrick1\", alpha.f = 0.5))\n```\n\nEdge colour with edge.color().\n\n```{r}\nplot(grime_08_clean, edge.color = \"steelblue1\")\n```\n\nR recognises many of the common names or hex colours. See [R-Charts](https://r-charts.com/colors/) for more colours.\n\n## Changing the Sizes\n\nYou can change the sizes of various aspects of the graph to make it clearer. Keep in mind that bigger does not always mean clearer! If you have a network with a lot of nodes, the chances are that the nodes are overlapping generating what we call a hairball. This is less than ideal because hairballs actually hide any of the interesting structure that exists within the network. Once way to overcome this is to make the edge and vertex size smaller. Note that you may need to try different sizes until you generate a clean visual.\n\n```{r}\nplot(grime_08_clean, vertex.size = 5, edge.arrow.size = 0.5)\n```\n\nAdditionally, you can change the width of yours ties. While previously we changed the size of the arrows themselves, below we change the width of the lines.\n\n```{r}\nplot(grime_08_clean, vertex.size = 5, edge.width = 10)\n```\n\n## Titles\n\nTitles are a great way to further clarify your visualisation by making it it easier to understand. Generally, there are two \"styles\" of titles. The first is a little more academic that explains the visualisation. Something like \"A Network Showing the Collaborations of Grime Artists in 2008.\" This is very descriptive of that the graph is. The second style is a more demonstrative of what the graph presents. \"Grime 2008 Had Two Well-Connected Artists.\" Rather than explaining what the visualisation is (i.e. a network) it explains what the graph shows (i.e. the story of the vis.). Be mindful of what audiences you are creating visuals for. Are they interested more in explanation or the story?\n\nIn Igraph, you can have a main title. This is usually at the head or top of the network and orients people to your visual (in either style discussed above).\n\n```{r}\nplot(grime_08_clean, vertex.size = 5, edge.arrow.size = 0.5, main = \"A Networking Showing Grime Collaborations \\n 2008\")\n```\n\nYou may also wish to present a subtitle on your graph. Subtitles act as footnotes or further explanations of your network. These titles are usually placed at the foot (bottom) of your visualisation.\n\n```{r}\nplot(grime_08_clean, vertex.size = 5, edge.arrow.size = 0.5, main = \"A Network Showing Grime Collaborations\", sub = \"Year = 2008\")\n```\n\n## Labels\n\nLabeling nodes on your network can be useful so viewers can identify nodes easily. Or, you can use them to draw people's attention to certain nodes.\n\nFirst, you may wish to change the size and offset the labels. These are particularly useful if you have many labels that are running into each other since reducing the size and offsetting them slightly can bring the labels away from highly populated areas of the network increasing its readability.\n\n```{r}\nplot(grime_08_clean, vertex.label.cex = 0.5, vertex.label.dist = 2)\n```\n\nAlternatively, you may wish to remove the labels altogether. This is useful if you have many nodes and the node labels are running into each other regardless of your sizing and offsetting.\n\n```{r}\nplot(grime_08_clean, vertex.label = NA)\n```\n\nFinally, you may wish to present the labels of highly connected individuals in the network. Here, for example, we have a slightly more advanced visualisation to demonstrate the well-connected artists in the network. See if you can follow the logic of the code.\n\n```{r}\nplot(grime_08_clean, vertex.label = ifelse(degree(grime_08_clean) > 4, V(grime_08_clean)$name, NA), vertex.label.cex = 0.5, vertex.label.color = \"white\", vertex.color = ifelse(degree(grime_08_clean) > 4, \"purple\", \"green\"), vertex.size = 10, edge.arrow.size = 0.25)\n```\n\nHere, then, we combine multiple visualisation techniques to generate a clean visualisation that emphasises the two most highly connected artists in Grime during 2008, Wiley and Jammer. We have changed the colour of the nodes in the graph to purple if they have more than 4 connections and greenif they have less. Since we are discussing a labels here, pay special attention to the ifelse() statement for the vertex label. We have changed the labels to show only those with more than 4 connections. Due to the node colour being dark, we also set the label colour to white.\n\n## General considerations for visualizations\n\nSo, we have talked about changing specific elements of your visualisation to clean it by reducing the visual noise and maximising certain aspects of the graph we care about. However, there are a few other tricks that you can use in R to help producing your visualisations.\n\n1.  The Aspect Ratio\n\nAt the moment, the plots we have created look rather \"zoomed out.\" Almost as though you are looking at it through the wrong end of binoculars. This is because RStudio has margins on their plot windows. What that means is that there is a standard set amount of white space along the margins (sides, top and bottom) of a plot. We can reduce these margins with the par() function and reduce the margins (mar=) to 0. What this effectively does is \"zoom in\" to the plot by removing the white space. Bare in mind, the mar option starts at the bottom, left, top, then right. So, if you have a mar = c(5,1,1,3) you will have a plot that has five units on the bottom, 1 on the left and top, then 3 on the right. You must run the par() function prior to your plot() for it to take effect. Take a look at the following plots for a demonstration.\n\n```{r}\nplot(grime_08_clean, vertex.label = NA)\n\npar(mar =c(0,0,0,0))\n\nplot(grime_08_clean, vertex.label = NA)\n```\n\nWe have reduced the margins all down to zero in the second plot. Keep in mind, if you have titles (main or sub) or a key/legend on your plotm you will need to increase the margins accordingly since they are placed into the margins.\n\n2.  Replicating Plots - set.seed()\n\nYou might have noticed that each time we plot our grime network, it looks a little different. The nodes and edges are all the same but the position of the visualisation is different each time. This occurs because R begins a plot from a point (think coordinates) in the plot window and selects a different place each time. In order to produce the same plot more than once, you must set the seed which basically means telling R where to start. If it starts in the same place each time, it will produce the same visual. Take a look at the following code.\n\n```{r}\npar(mar =c(0,0,0,0))\nset.seed(123)\nplot(grime_08_clean, vertex.label = NA)\n```\n\nIn the above chunk we have set the parameters (zoomed in) and selected a seed (starting point) of 123. This could be whatever numbers you want. So long as you call on it the same each time you plot that network, it will produce the same visual. See below, for example.\n\n```{r}\npar(mar =c(0,0,0,0))\nset.seed(123)\nplot(grime_08_clean, vertex.label = NA)\n```\n\nThe visualisation is replicated. This is particularly useful when you need to produce the same visual (i.e. for a publication). So, when you care about reproducing the network visual, set the seed!\n\n3.  Multiple Plots\n\nOne final trick, you may want to have more than one plot next to each other. This side-by-side approach is often used to compare across visualisations or to present different elements of the network. Again, we use the par() function, but this time we use the mfrow option and then set the number of rows and columns in our plot.\n\nHere we set our plot to have two rows and one column which presents one visual stacked on the other.\n\n```{r}\npar(mfrow = c(2, 1))\n\npar(mar =c(0,0,0,0))\n\nset.seed(123)\nplot(grime_08_clean, vertex.label = NA)\n\nset.seed(123)\npar(mar =c(0,0,0,0))\nplot(grime_08_clean, vertex.label = ifelse(degree(grime_08_clean) > 4, V(grime_08_clean)$name, NA), vertex.label.cex = 0.5, vertex.label.color = \"white\", vertex.color = ifelse(degree(grime_08_clean) > 4, \"purple\", \"green\"), vertex.size = 10, edge.arrow.size = 0.25)\n```\n\nOr, if we flip the rows and columns, we end up with a side-by-side plot.\n\n```{r}\npar(mfrow = c(1, 2))\nset.seed(123)\npar(mar =c(0,0,0,0))\nplot(grime_08_clean, vertex.label = NA)\n\nset.seed(123)\npar(mar =c(0,0,0,0))\nplot(grime_08_clean, vertex.label = ifelse(degree(grime_08_clean) > 4, V(grime_08_clean)$name, NA), vertex.label.cex = 0.5, vertex.label.color = \"white\", vertex.color = ifelse(degree(grime_08_clean) > 4, \"purple\", \"green\"), vertex.size = 10, edge.arrow.size = 0.25)\n```\n\n## Summary\n\nVisualisation is a powerful tool to communicate data. However, visualisations can be very messy and the mess may confuse rather than clarify. In this section, we have covered:\n\n1.  Methods for reducing visual noise in a network through changing the layout, sizes, and colours\n2.  Effective titling methods\n3.  Ways to make certain aspects of the network more prominent\n4.  Effective and accessible collouring of network visualisations\n5.  General tricks for creating network visuals in RStudio.\n\nWell done!\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"Basic Visualisation.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","bibliography":["references.bib"],"editor":"visual","theme":["superhero","brand"]},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"Basic Visualisation.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"editor":"visual","documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}