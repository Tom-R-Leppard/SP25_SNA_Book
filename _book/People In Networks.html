<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>12&nbsp; People in Networks – Introduction to Network Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Communities in Networks.html" rel="next">
<link href="./Advanced Visualisation - Dynamic.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-77205cbbef6a5b90ba72edc25dea2156.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./People In Networks.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">People in Networks</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Network Analysis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Network Data Structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introducing Network Data Structures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Cleaning Network Data - Trimming and Adding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Cleaning Network Data - Trimming and Adding</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Cleaning Network Data - Subgraphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Cleaning Network Data - Subgraphs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Node and Edge Attributes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Node and Edge Attributes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Two Mode Networks - AM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Two Mode Networks - Adjacency Matrix</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Two Mode Networks - Edgelists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Two Mode Networks - Edgelists</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Basic Visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Network Visualisation - Basic</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Intermediate Visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Visualisations - Intermediate</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Advanced Visualisation - Interactive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Interactive Networks Visualisations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Advanced Visualisation - Dynamic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dynamic Network Visualisations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./People In Networks.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">People in Networks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Communities in Networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Communities In Networks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Networks of People.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Networks of People</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#measures-of-centrality" id="toc-measures-of-centrality" class="nav-link active" data-scroll-target="#measures-of-centrality"><span class="header-section-number">12.1</span> Measures of Centrality</a>
  <ul class="collapse">
  <li><a href="#degree-centrality-and-strength" id="toc-degree-centrality-and-strength" class="nav-link" data-scroll-target="#degree-centrality-and-strength"><span class="header-section-number">12.1.1</span> Degree Centrality and Strength</a></li>
  <li><a href="#closeness-centrality" id="toc-closeness-centrality" class="nav-link" data-scroll-target="#closeness-centrality"><span class="header-section-number">12.1.2</span> Closeness Centrality</a></li>
  <li><a href="#betweenness-centrality" id="toc-betweenness-centrality" class="nav-link" data-scroll-target="#betweenness-centrality"><span class="header-section-number">12.1.3</span> Betweenness Centrality</a></li>
  <li><a href="#constraint" id="toc-constraint" class="nav-link" data-scroll-target="#constraint"><span class="header-section-number">12.1.4</span> Constraint</a></li>
  <li><a href="#visualising-central-nodes" id="toc-visualising-central-nodes" class="nav-link" data-scroll-target="#visualising-central-nodes"><span class="header-section-number">12.1.5</span> Visualising central nodes</a></li>
  <li><a href="#final-thoughts-on-measures" id="toc-final-thoughts-on-measures" class="nav-link" data-scroll-target="#final-thoughts-on-measures"><span class="header-section-number">12.1.6</span> Final thoughts on measures</a></li>
  </ul></li>
  <li><a href="#tabulating-centrality-measures" id="toc-tabulating-centrality-measures" class="nav-link" data-scroll-target="#tabulating-centrality-measures"><span class="header-section-number">12.2</span> Tabulating Centrality Measures</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">People in Networks</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>One way to analyse a social network is to analyse the people in those networks. In general terms,we can report on individuals based on the structural position they hold within a network. The concept and various measures of centrality allows us to do so. Ultimately, as the scientist, you can tell stories about the individuals in your network based on how central of peripheral they are in the group. In other words, measures of centrality tell stories about the individuals in your network.</p>
<p>I encourage you to think about these measures in terms of an individuals prominence and influence over the network. In this chapter, we will be using four measures, degree centrality, betweenness centrality, closeness centrality, and constraint. First, let’s go through these one-by-one showing how to measure these in igraph. I won’t go too deep into the maths behind the algorithms, but will focus more on substantively what it means. Then, I will show you how to construct a data frame with all of this information so you can then use these to run further analysis (i.e.&nbsp;perhaps regressing centrality on career success). You may have multiple years worth of networks and could create line graphs of centrality for each node over time to see their personal change overtime.</p>
<p>Before we begin, let’s bring in the Grime data we have been using so far. We know by now we need to remove self loops in this edgelist.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>grime_edge_list <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.choose</span>(), <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>grime_08 <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d=</span> grime_edge_list, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grime_08)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="People-In-Networks_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>grime_08_clean <span class="ot">&lt;-</span> <span class="fu">delete.edges</span>(grime_08, <span class="fu">E</span>(grime_08)[<span class="fu">which_loop</span>(grime_08)])</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="People-In-Networks_files/figure-html/unnamed-chunk-1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="measures-of-centrality" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="measures-of-centrality"><span class="header-section-number">12.1</span> Measures of Centrality</h2>
<p>You may be interested in finding out who are some prominent individuals in your network. When I say prominent, I really mean those what are “well connected” or perhaps “popular”. Someone who is very prominent in the network is likely positioned very central compared to others.</p>
<section id="degree-centrality-and-strength" class="level3" data-number="12.1.1">
<h3 data-number="12.1.1" class="anchored" data-anchor-id="degree-centrality-and-strength"><span class="header-section-number">12.1.1</span> Degree Centrality and Strength</h3>
<p>Degree centrality is simply a count of the number of ties that a node has with others in the network. Put simply, it is a count of how many neighbours any given node has.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">degree</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
              1               0               0               1               2 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
              2               1               2               1               0 
        Shystie          Blacks         Badness         Chronik         Tempa T 
              0               1               1               1               1 
Newham Generals          Skepta             JME            Chip             BBK 
              1               1               1               4               1 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
              0               1               0               1               3 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
              2               0               2               8               1 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
              0               0               0               0              10 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
              2               1               1               1               1 </code></pre>
</div>
</div>
<p>There is a variation of degree centrality called strength(), which accounts for the weighted nature of the edges. Instead of just counting the number of neighbours, it sums the weights of the connections to each neighbor, reflecting both the number of connections and their strength (or whatever the edge weight represents).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strength</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
              1               0               0               1               2 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
              2               1               2               1               0 
        Shystie          Blacks         Badness         Chronik         Tempa T 
              0               1               1               1               1 
Newham Generals          Skepta             JME            Chip             BBK 
              1               1               1               4               1 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
              0               1               0               1               3 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
              2               0               2               8               1 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
              0               0               0               0              10 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
              2               1               1               1               1 </code></pre>
</div>
</div>
<p>So, we see that Wiley and Jammer are very popular in this network. However, since this is a directed network, there is even more that we can tease out from this in terms of their outgoing and incoming connections. Put simply, we can get the individual’s strength (i.e.&nbsp;the number of connections and edge weight). We do this by using the ‘mode =’ argument from the strength() function. “in” takes the incoming ties and “out” gets the outgoing ties.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strength</span>(grime_08_clean, <span class="at">mode =</span> <span class="st">"in"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
              0               0               0               0               0 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
              0               0               0               0               0 
        Shystie          Blacks         Badness         Chronik         Tempa T 
              0               0               0               0               0 
Newham Generals          Skepta             JME            Chip             BBK 
              0               0               0               3               0 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
              0               0               0               0               1 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
              0               0               1               7               0 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
              0               0               0               0              10 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
              2               1               1               1               1 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strength</span>(grime_08_clean, <span class="at">mode =</span> <span class="st">"out"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
              1               0               0               1               2 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
              2               1               2               1               0 
        Shystie          Blacks         Badness         Chronik         Tempa T 
              0               1               1               1               1 
Newham Generals          Skepta             JME            Chip             BBK 
              1               1               1               1               1 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
              0               1               0               1               2 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
              2               0               1               1               1 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
              0               0               0               0               0 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
              0               0               0               0               0 </code></pre>
</div>
</div>
</section>
<section id="closeness-centrality" class="level3" data-number="12.1.2">
<h3 data-number="12.1.2" class="anchored" data-anchor-id="closeness-centrality"><span class="header-section-number">12.1.2</span> Closeness Centrality</h3>
<p>Another measurement of centrality that captures the prominence of a node is closeness centrality. The closeness centrality measure uses the average length of the shortest path from one node to all other nodes in the network. Simply, it measures how close a node is to others in the network. A node with a high closeness centrality is considered more prominent in the network because they can reach all others in the network quickly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">closeness</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
      0.3333333             NaN             NaN       0.3333333       0.2500000 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
      0.2500000       0.3333333       0.2500000       0.3333333             NaN 
        Shystie          Blacks         Badness         Chronik         Tempa T 
            NaN       1.0000000       1.0000000       1.0000000       1.0000000 
Newham Generals          Skepta             JME            Chip             BBK 
      1.0000000       1.0000000       1.0000000       1.0000000       1.0000000 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
            NaN       1.0000000             NaN       0.3333333       0.2500000 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
      0.2500000             NaN       0.1666667       1.0000000       1.0000000 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
            NaN             NaN             NaN             NaN             NaN 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
            NaN             NaN             NaN             NaN             NaN </code></pre>
</div>
</div>
<p>Closeness is a bit of a strange one. You have to take into consideration the direction of the network. At its core, the maths behind this measure identifies the possible paths that lead one node to another in the network. This takes into consideration the direction of the network. You have to identify the number of “steps” it takes one node to reach all the possible nodes connected to them across the network. Then, you divide that score by 1 and this gives the closeness score.</p>
<p>Take Frisco for example (this is one of the nodes that sits in between the two big hubs). Because of the direction of the network, the furthest node across the network that Frisco can reach is Lauren Mason through Wiley. Going the other way, the furthest Frisco can go is to Jammer. So, this node can reach 3 alters. It takes one step to Jammer, 1 step to Wiley, and 1 step to Lauren Mason. This is a total distance of 4 steps. 1/4 = 0.25 closeness centrality score.</p>
<p>Some of you noted that certain nodes had a score of 1 - like Tempa T. If you look at Tempa T, this node appears to be connected to a big hub of the network (Jammer’s). However, pay attention to the direction of the ties. Jammer is as far as Tempa T can get. So, the maths for his closeness score is 1 step. 1/1 = 1.</p>
<p>This is a weakness of closeness centrality! Because a node with a closeness of 1 may only have 1 connection. But a node with a closeness of .25 (say Frisco) has more! This is why we use multiple scores to tell our story. Mainly, I tend to use degree (or directed strength) and betweenness since they are more robust.</p>
</section>
<section id="betweenness-centrality" class="level3" data-number="12.1.3">
<h3 data-number="12.1.3" class="anchored" data-anchor-id="betweenness-centrality"><span class="header-section-number">12.1.3</span> Betweenness Centrality</h3>
<p>Next, let’s talk about influential people in a network. Influence has to do with controlling the flow of resources (e.g.&nbsp;information etc.) within a network or rather, being involved with the transition of resources. The most influential individuals, perhaps you could think of them as powerful, are highly “central” to the ongoings of the network. Betweenness centrality is a measure that can help us capture this type of information.</p>
<p>Betweenness centrality measures the number of times an individual node lies on the shortest path (geodesic) between any two other nodes in the network. A geodesic is the shortest possible path connecting two nodes. Imagine a network as a set of people connected by relationships, where you are trying to travel from one person to another. The shortest path represents the quickest way to get from one node to another in the network. Betweenness centrality counts how often a specific node appears as a part of these shortest paths, reflecting its role in connecting different parts of the network.</p>
<p>For this measure, whether the network is directed is important. Consider ties as roads: if there are two lanes (one for going and one for returning), information can flow in both directions. However, if there is only a one-way road, information can only travel in one direction. In a directed network, a node may appear on the geodesic, but if it only has outgoing connections, it might not have much influence on others, as it cannot receive information from other nodes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
              0               0               0               0               0 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
              0               0               0               0               0 
        Shystie          Blacks         Badness         Chronik         Tempa T 
              0               0               0               0               0 
Newham Generals          Skepta             JME            Chip             BBK 
              0               0               0               4               0 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
              0               0               0               0               2 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
              0               0               0               7               0 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
              0               0               0               0               0 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
              0               0               0               0               0 </code></pre>
</div>
</div>
<p>Compare these numbers (the betweenness) with the artist’s degree centrality. What do you notice? You may notice that those who are highly prominent aren’t necessarily the most influential. Take Wiley, for example. He is among the most central (a high degree) but, he has low influence. Why is this? Well, look at the direction of the ties! He has a lot of incoming ties and not many outgoing meaning that he cannot (if we stick with the directedness of the graph) influence others.</p>
</section>
<section id="constraint" class="level3" data-number="12.1.4">
<h3 data-number="12.1.4" class="anchored" data-anchor-id="constraint"><span class="header-section-number">12.1.4</span> Constraint</h3>
<p>Constraint is a measure of a node’s embeddedness in a specific portion of the network, indicating how much its connections are limited to a small set of other nodes. A node with high constraint has fewer opportunities to interact with a broader range of nodes, as its ties are concentrated within a small cluster. This measure assesses the diversity of connections, not in terms of the types of ties (such as strong or weak edges), but in terms of the variety of other nodes it connects to.</p>
<p>Constraint is considered a measure of influence because, those who have a low constraint have access to diverse resources within the network. They may bridge across subgroups in the network which means that they may have access to nonredundant (new) resources.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">constraint</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Asher D   Dizzee Rascal   Lethal Bizzle        Scorcher     Bless Beats 
      1.0000000             NaN             NaN       1.0000000       0.5000000 
        Flowdan  Tinchy Stryder          Frisco            Kano     Treble Clef 
      0.5000000       1.0000000       0.5000000       1.0000000             NaN 
        Shystie          Blacks         Badness         Chronik         Tempa T 
            NaN       1.0000000       1.0000000       1.0000000       1.0000000 
Newham Generals          Skepta             JME            Chip             BBK 
      1.0000000       1.0000000       1.0000000       0.2500000       1.0000000 
Virus Syndicate          Ghetts        Mercston        Double S        Griminal 
            NaN       1.0000000             NaN       1.0000000       0.5555556 
        Ice Kid Nu Brand Flexxx       Wretch 32           Wiley  Bossman Birdie 
      0.5000000             NaN       1.0000000       0.1250000       1.0000000 
    The Streets            Sway    Tinie Tempah           Giggs          Jammer 
            NaN             NaN             NaN             NaN       0.1000000 
      Roll Deep          Devlin        P Money     Lauren Mason     Milli Major 
      0.5000000       1.0000000       1.0000000       1.0000000       1.0000000 </code></pre>
</div>
</div>
</section>
<section id="visualising-central-nodes" class="level3" data-number="12.1.5">
<h3 data-number="12.1.5" class="anchored" data-anchor-id="visualising-central-nodes"><span class="header-section-number">12.1.5</span> Visualising central nodes</h3>
<p>The vertex.size argument that accompanies the plot() function in igraph gives you the option to visualise those in the network based on their centrality scores.</p>
<p>Let’s say we want to visualise the degee centrality in order to demonstrate who is prominent in the network. Use the chunk below and see how we combine the plot() with the degree() functions from igraph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grime_08_clean, <span class="at">vertex.size =</span> <span class="fu">degree</span>(grime_08_clean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="People-In-Networks_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Pretty cool, right? Bear in mind that this literally assigned the node size to equal the value of the degree centrality. So, if a node has a degree value of 100, the their size will equal 100. This will likely crowd out other nodes in your visualisation. If this occurs, you may try dividing the degree scores by a constant (for example. 10). This will divide every node’s degree score, so the visual will still represent the relative differences between their degree. To do this simply add a division after the degree() argument. If the opposite occurs (i.e.&nbsp;the node’s degree centrality is too small to visualise) you can multiply it by a constant. See the examples below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grime_08_clean, <span class="at">vertex.size =</span> <span class="fu">degree</span>(grime_08_clean)<span class="sc">/</span><span class="dv">2</span>, <span class="at">sub =</span> <span class="st">"Node Size = Degree/2"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grime_08_clean, <span class="at">vertex.size =</span> <span class="fu">degree</span>(grime_08_clean)<span class="sc">*</span><span class="dv">2</span>, <span class="at">sub =</span> <span class="st">"Node Size = Degree*2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="People-In-Networks_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="final-thoughts-on-measures" class="level3" data-number="12.1.6">
<h3 data-number="12.1.6" class="anchored" data-anchor-id="final-thoughts-on-measures"><span class="header-section-number">12.1.6</span> Final thoughts on measures</h3>
<p>There are many measures that you can use to tell a story about individuals in your network. They all rely on sightly different maths and algorithms. As such, I encourage you to learn, at least on a fundamental level what each measure captures so you can understant what the measure is really telling you.</p>
<p>Furthermore, it may make sense to remove isolates from the network and only keep the main component of the network. Depending on what measures you are using, isolates are often left out. For example, you can’t get the constraint measure for an isolate. So, you may consider only including those with connections in your analysis. This depends on what you are trying to do. I encourage you to be mindful of what you are asking and then consider if you need everyone in the network (i.e.&nbsp;including isolates) or if your question only involves those with connections to others.</p>
</section>
</section>
<section id="tabulating-centrality-measures" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="tabulating-centrality-measures"><span class="header-section-number">12.2</span> Tabulating Centrality Measures</h2>
<p>We can now make this a dataframe with all the information that we have created. To do this, we need to create objects (vectors) with all of the measures we care for. Then we can assign these to a data frame that we can use.</p>
<p>So far, you have been just using the arguments directly and seeing them populate in the console. A good practice is to make them objects so you can use them in the future. This way, you do not have to re run the function every time. To do this, simply use the assignment operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>degree <span class="ot">&lt;-</span> <span class="fu">degree</span>(grime_08_clean)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>strength <span class="ot">&lt;-</span> <span class="fu">strength</span>(grime_08_clean)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>close <span class="ot">&lt;-</span> <span class="fu">closeness</span>(grime_08_clean)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>betweenness <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(grime_08_clean)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>constraint <span class="ot">&lt;-</span> <span class="fu">constraint</span>(grime_08_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that these all create vector value objects in your environment from which you can create a table with all of these. You ca combine these into a table using the data.frame() function then list each column setting them equal to the appropriate vectors. I also create a column with the year that these data are pulled from. Finally, I name the column that lists the node names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>node_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">grime_degree =</span> degree,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">grime_strength =</span> strength,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">grime_close =</span> close,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">grime_constraint =</span> constraint,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">grime_betweenness =</span> betweenness,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2008</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">V</span>(grime_08_clean)<span class="sc">$</span>name</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(node_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              grime_degree grime_strength grime_close grime_constraint
Asher D                  1              1   0.3333333              1.0
Dizzee Rascal            0              0         NaN              NaN
Lethal Bizzle            0              0         NaN              NaN
Scorcher                 1              1   0.3333333              1.0
Bless Beats              2              2   0.2500000              0.5
Flowdan                  2              2   0.2500000              0.5
              grime_betweenness year          name
Asher D                       0 2008       Asher D
Dizzee Rascal                 0 2008 Dizzee Rascal
Lethal Bizzle                 0 2008 Lethal Bizzle
Scorcher                      0 2008      Scorcher
Bless Beats                   0 2008   Bless Beats
Flowdan                       0 2008       Flowdan</code></pre>
</div>
</div>
<p>Now, you can use your imagination on the types of things you can do with this information. What types of analyses can you think of? Maybe centrality is associated with some other attribute or variable. This network, for example, is of musicians. Perhaps centrality is associated with success, popularity, or other accolades. Perhaps, central positions are filled more by one type of artist than another (e.g.&nbsp;male/female, one form of music vs another). You could perform correlations, differences of means, regressions etc. The possibilities are plenty!!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Advanced Visualisation - Dynamic.html" class="pagination-link" aria-label="Dynamic Network Visualisations">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dynamic Network Visualisations</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Communities in Networks.html" class="pagination-link" aria-label="Communities In Networks">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Communities In Networks</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>